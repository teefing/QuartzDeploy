---
{"publish":true,"permalink":"/ðŸ€ èŠ±å›­å¯¼è§ˆ/ðŸ§° æœ¬åº“æŒ‡å—/Obsidian/Plugins/Dataview.md","aliases":"Dataviewjs","title":"Dataview","created":"2022-06-09","modified":"2023-03-14","published":"2025-07-10T22:25:31.424+08:00","tags":["obsidianæ’ä»¶"],"cssclasses":""}
---


é™¤äº†å¶å°”å……å½“æ€§èƒ½åˆºå®¢ï¼Œè®©æˆ‘æ‰“å¼€æŸä¸ªæ–‡ä»¶çš„æ—¶å€™ï¼Œå¡åŠå¤©ã€‚å…¶ä»–éƒ½å¾ˆå¥½ã€‚[[Atlas/Bases/âˆ‘ BASE\|Bases]]æ€§èƒ½å˜Žå˜Žå¥½ï¼Œæ°¸ä¸èƒŒåˆºã€‚

> ä»Šå¤©åˆè¢«è¿™ä¸ªdataviewè¢«è¾žäº†ï¼Œæ‰“å¼€è¿™ä¸ªæ–‡ä»¶ï¼Œå¡äº†å¥½ä¹…ã€‚

## æœ¬è´¨

[[Cards/frontmatter]]æœ¬è´¨å°±æ˜¯è¡¨æ ¼çš„ä¸€åˆ—åˆ—å±žæ€§ã€‚dataviewçš„æœ¬è´¨å°±æ˜¯è¡¨æ ¼çš„filterç­›é€‰åŠŸèƒ½ã€‚

## è°ƒè¯•æŠ€å·§

æ‰“å¼€è°ƒè¯•æŽ§åˆ¶å°ï¼Œåœ¨dataviewjsé‡Œé¢å¯ä»¥ç›´æŽ¥console.logï¼Œä»¥æŸ¥çœ‹æ‰€æœ‰å˜é‡ã€‚ç›®å‰è¿˜æ²¡æ‰¾åˆ°æ¯”è¾ƒå¥½çš„æ™ºèƒ½æç¤ºä»£ç çš„æ–¹æ³•ã€‚å…ˆè¿™æ ·å°†å°±ç”¨ã€‚å¦‚ä¸‹ï¼Œæ‰“å¼€è°ƒè¯•æŽ§åˆ¶å°ï¼Œå¯ä»¥çœ‹åˆ°ï¼Œæ‰“å°å‡ºäº†obsidianç³»ç»Ÿapiè‡ªå¸¦çš„å…¨éƒ¨æ–¹æ³•å’Œå˜é‡ã€‚

```dataviewjs-åˆ é™¤ç”Ÿæ•ˆ
const test = this.app;

console.log(test);

dv.el("b", "æ‰“å¼€è°ƒè¯•æŽ§åˆ¶å°çœ‹æ•°æ®");
```

## æ„Ÿæ‚Ÿ

dataview çš„ç‰›é€¼ä¹‹å¤„ï¼Œåœ¨äºŽå®ƒè®©æˆ‘ä»¬æˆä¸ºè‡ªå·±ç¬”è®°åº“çš„å¤§æ•°æ®åˆ†æžå¸ˆã€‚ä¸ç®¡æˆ‘ä»¬åˆ›å»ºçš„æ•°æ®æœ‰å¤šä¹ˆæ‚ä¹±ï¼Œå¾€å¾€æ ¹æ®è‡ªå·±çš„æ€ç»´æ–¹å¼æ‰€åˆ›å»ºå‡ºæ–‡ä»¶çš„ã€Žæ–‡ä»¶å¤¹ã€æ ‡ç­¾ã€é“¾æŽ¥ã€å‡ºçŽ°ä¸€å®šçš„èŒƒå¼è€Œå˜å¾—æœ‰è¿¹å¯å¾ªï¼Œå†é…åˆä¸Šåˆ›å»ºæ—¶é—´ä¿®æ”¹æ—¶é—´ç­‰ä¿¡æ¯ï¼Œä»Žè‡ªå·±çš„ç¬”è®°æµ·æ´‹ä¸­æŠ“å–è‡ªå·±æƒ³è¦çš„æ•°æ®ï¼Œå˜å¾—ç®€å•ã€‚è¿™ä¹Ÿæ˜¯ [[Spaces/2-Area/çŸ¥è¯†ç®¡ç†/è‡ªä¸‹è€Œä¸Š]]çš„æ–¹æ³•å¿…é¡»è¦é…å¥—çš„[[Cards/å·¥å…·å’Œæ–¹æ³•è®º]]ã€‚

å®˜ç½‘ï¼š

[GitHub - blacksmithgu/obsidian-dataview: A high-performance data index and query language over Markdown files, for https://obsidian.md/.](https://github.com/blacksmithgu/obsidian-dataview)

## ç®€å•çš„ dataview è¯­æ³•

[Queries - Dataview](https://blacksmithgu.github.io/obsidian-dataview/query/queries/)

## å¸¸ç”¨èŒƒä¾‹

[[Cards/dataviewjså¸¸ç”¨ä½¿ç”¨ç¤ºä¾‹èŒƒä¾‹]]

[[Cards/dataviewå¸¸ç”¨ä½¿ç”¨ç¤ºä¾‹èŒƒä¾‹]]

[[Cards/å¯èƒ½åœ¨obä¼šç”¨ä¸€è¾ˆå­çš„dataviewä»£ç ]]

## dataviewjs çš„å‚è€ƒèµ„æ–™

[[Cards/é¸Ÿå§çš„dataviewjsæŠ€å·§]]  
[ObsidianDataviewæ–‡æ¡£ä¸­æ–‡ - çŸ¥ä¹Ž](https://www.zhihu.com/column/c_1504479637841866752)

[Obsidian æ’ä»¶ä¹‹ Dataview - å°‘æ•°æ´¾ (sspai.com)](https://sspai.com/post/68183)

dataviewjs å¯ä»¥å®žçŽ°æ›´çµæ´»çš„è¯­æ³•ï¼Œæ¯”å¦‚è¡¨æ ¼æ’å…¥ä¸€ä¸ªè‡ªå¢žé•¿çš„å˜é‡ï¼Œå®žçŽ°è¡¨æ ¼çš„ No è¡Œå·æ˜¾ç¤ºæ•ˆæžœã€‚

dataviewjs ç¤¾åŒºæœ‰å¾ˆå¤šé…·ç‚«çš„çŽ©æ³•å’ŒçŽ°æœ‰ä»£ç ï¼Œå½“è¦ç”¨çš„æ—¶å€™ï¼Œå…ˆåŽ»æ‰¾æ‰¾çœ‹ï¼Œåˆ«è‡ªå·±é€ è½®å­ã€‚

dataview æœ‰ç§æ•°æ®æŒ–æŽ˜çš„æ„Ÿè§‰ã€‚é€šè¿‡ä¸åŒè§’åº¦åˆ†æžå’ŒæŒ–æŽ˜è‡ªå·±çš„å¤§è„‘æ›¾ç»çš„æ€è€ƒè½¨è¿¹å’Œè·¯å¾„ã€‚

## dataviewjs çš„å†…ç½®å‡½æ•°ä¸Žå˜é‡

[[Cards/dataviewçš„æ•°æ®æ¥æº]]

ä¸æ”¯æŒä»£ç æ™ºèƒ½è”æƒ³ï¼Œåªèƒ½æ‰‹åŠ¨è®°å¿†æˆ–æŸ¥è¡¨ã€‚

[Codeblock Reference - Dataview](https://blacksmithgu.github.io/obsidian-dataview/api/code-reference/)

## Query

### é¢„å¤‡æ•°æ®ï¼š

æµ‹è¯• dataviewjs çš„æŸ¥è¯¢æ•ˆæžœï¼Œå‹¿åˆ 

æµ‹è¯• outlinks

### ä»£ç 

ç›¸å½“äºŽèŽ·å– dataview å¯¹è±¡çš„å†…éƒ¨æ•°æ®ï¼Œç„¶åŽéœ€è¦é€šè¿‡ Render å‡½æ•°ï¼Œç±»ä¼¼ console.log æ‰“å°å‡ºæ¥ï¼Œæ‰èƒ½çœ‹åˆ°ã€‚

ç›®å‰çœ‹ï¼Œåªèƒ½æ ¹æ® tagã€æ–‡ä»¶å¤¹ã€è·¯å¾„/æ–‡ä»¶åè¿™å‡ ä¸ªå±žæ€§ query é¡µé¢ pages

```dataviewjs-åˆ é™¤ç”Ÿæ•ˆ
// ## Query

let a = dv.current()
dv.paragraph(a);
  
let b = dv.pages("#test")
dv.paragraph(b);
//æ¯ä¸ªpagesçš„è¯¦æƒ…éƒ½ä¼šæ˜¾ç¤ºï¼Œæ‰€ä»¥æ‰“å°å‡ºæ¥ä¼šå¾ˆå¡ï¼Œè¦ä¿è¯æŸ¥è¯¢èŒƒå›´è¶³å¤Ÿçª„
//dv.pages() => all pages in your vault

//dv.pages("#review") => all pages with tag 'books'

//dv.pages('"journals"') => all pages from folder "folder"

//dv.pages("#MOC or -#todo") => all pages with tag #yes, or which DON'T have tag #no

//dv.pages('"journals" or #MOC') => all pages with tag #tag, or from folder "folder"

//

//dv.pagePaths("#review") => the paths of pages with tag 'books'

//

//dv.page("æœ€è¿‘ç¼–è¾‘ã€æœ€è¿‘åˆ›å»ºã€æœ€è¿‘ä»»åŠ¡.md") => The page object for /Index

//dv.page("pages/contents.md") => The page object for /books/The Raisin.md

```

## Render

å°±æ˜¯å°†æ•°æ®æ‰“å° print å‡ºæ¥

```dataviewjs-åˆ é™¤ç”Ÿæ•ˆ
// ## Render

dv.el("b", "This is some bold text");
dv.header(1, "Big!");
dv.header(6, "Tiny");
dv.paragraph("This is some text");
dv.span("This is some text");

```

## Dataviews

dataviews å’Œ notion çš„ dataview ç±»ä¼¼ï¼Œæ‰“å°å±•ç¤º tableã€listã€tasklist ç­‰è§†å›¾ã€‚

ç›¸å½“äºŽæ˜¯å‰é¢èŽ·å–äº† pages ä»¥åŽï¼Œè¿™é‡Œå¯¹ pages è¿›è¡Œ profile å¤„ç†ï¼ŒèŽ·å–è‡ªå·±å…³å¿ƒçš„ä¸€äº›å±žæ€§ï¼Œå‚ç…§å‰é¢æ‰“å°å‡ºæ¥çš„å±žæ€§å€¼å³å¯ï¼Œæ¯”å¦‚ tagsã€etagsã€cdate

èŽ·å–åˆ°çš„æ˜¯ promiseï¼Œrender å‡½æ•°ç›¸å½“äºŽé˜»å¡žèŽ·å–æ•°æ®ï¼Œä»¥åŠ where å‡½æ•°ç›¸å½“äºŽæ˜¯ä¼ å…¥ä¸€ä¸ªç­›é€‰åŠŸèƒ½çš„å‡½æ•°

taskList èµ·åˆ°äº† render å‡½æ•°åŒæ ·çš„ä½œç”¨ã€‚

```dataviewjs-åˆ é™¤ç”Ÿæ•ˆ
// ## Dataviews

let a = dv.list([1, 2, 3]) // => list of 1, 2, 3
dv.paragraph(a);

//dv.list(dv.pages().file.name) => list of all file names
//dv.list(dv.pages().file.link) => list of all file links
//dv.list(dv.pages("#book").where(p => p.rating > 7)) => list of all books with rating greater than 7
//
//// List all tasks from pages marked '#project'
//dv.taskList(dv.pages("#project").file.tasks)
//
//// List all *uncompleted* tasks from pages marked #project
let b = dv.taskList(dv.pages().file.tasks)
//.where(t => !t.completed));

//
//// List all tasks tagged with '#tag' from pages marked #project
//dv.taskList(dv.pages("#project").file.tasks
//    .where(t => t.text.includes("#tag")))
//
//

// Render a simple table of book info sorted by rating.
dv.table(["File", "mday", "cday", "tags"], dv.pages("#review")
    .sort(b => b.mday)
    .map(b => [b.file.name, b.file.mday, b.file["cday"], b.tags]))

```

## Utility

ç›¸å½“äºŽæä¾›äº†ä¸€äº›é€šç”¨å‡½æ•°è¿›è¡Œä¾¿æ· utils å¤„ç†ã€‚

```javascript-åˆ é™¤ç”Ÿæ•ˆ
// ## Utility

dv.array([1, 2, 3]) => dataview data array [1, 2, 3]

dv.isArray(dv.array([1, 2, 3])) => true
dv.isArray([1, 2, 3]) => true
dv.isArray({ x: 1 }) => false

dv.date("2021-08-08") => DateTime for August 8th, 2021
dv.date(dv.fileLink("2021-08-07")) => dateTime for August 8th, 2021

dv.compare(1, 2) = -1
dv.compare("yes", "no") = 1
dv.compare({ what: 0 }, { what: 0 }) = 0
```

## File IO

å¿…é¡»é˜…è¯»æ¨¡å¼ä¸‹æ‰ç”Ÿæ•ˆï¼Œå®žæ—¶é˜…è§ˆæ¨¡å¼ä¸‹ä¼šæŠ¥é”™

```dataviewjs-åˆ é™¤ç”Ÿæ•ˆ
// ## File I/O

//await dv.io.csv("hello.csv") => [{ column1: ..., column2: ...}, ...]

let a = await dv.io.load("pages/contents.md") // => "# File\nThis is an example file..."
dv.paragraph(a);
// dv.io.normalize("Test") => "dataview/test/Test.md", if inside "dataview/test"
// dv.io.normalize("Test", "dataview/test2/Index.md") => "dataview/test2/Test.md", irrespective of the current file
```

## Query Evaluation

è²Œä¼¼æ²¡å•¥ç”¨

```dataviewjs-åˆ é™¤ç”Ÿæ•ˆ

// ## Query Evaluation

dv.tryEvaluate("2 + 2") // => 4
// dv.tryEvaluate("x + 2", {x: 3}) => 5
// dv.tryEvaluate("length(this.file.tasks)") => number of tasks in the current file

// dv.evaluate("2 + 2") => Successful { value: 4 }
// dv.evaluate("2 +") => Failure { error: "Failed to parse ... " }

```

## example

```dataviewjs-åˆ é™¤ç”Ÿæ•ˆ
for (let group of dv.pages("#todo").groupBy(p => p.genre)) {
    let a = 1;
    dv.header(3, group.key);
    dv.table(["Name", "Time Read", "Rating","No"],
        group.rows
            .sort(k => k.rating, 'desc')
            .map(k => [k.file.link, k["time-read"], k.rating, a++]))
}

```

### æœªå®Œæˆ tasks

```dataview-åˆ é™¤ç”Ÿæ•ˆ
task from #projects/active
```

```dataviewjs-åˆ é™¤ç”Ÿæ•ˆ
dv.taskList(dv.pages().file.tasks.where(t => !t.completed));
```

### å·²å®Œæˆ tasks

```dataviewjs-åˆ é™¤ç”Ÿæ•ˆ
dv.taskList(dv.pages('"/" and -"pages/500 - ARCHIVE"').file.tasks.where(t => t.completed));
```